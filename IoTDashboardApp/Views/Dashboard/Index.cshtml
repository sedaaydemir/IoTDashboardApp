@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Anlık Sıcaklık: <span id="temp">0</span> °C</h2>

@section Scripts {
    <script>
        // PlcHub bağlantısı
        const plcConnection = new signalR.HubConnectionBuilder()
            .withUrl("/plcHub")
            .build();

        // PLC'den sıcaklık verisini al
        plcConnection.on("ReceiveTemperature", function (temperature) {
            console.log("Gelen sıcaklık:", temperature);
            document.getElementById("temp").innerText = temperature;
        });

        // Bağlantıyı başlat
        async function startPlcConnection() {
            try {
                await plcConnection.start();
                console.log("PlcHub bağlantısı kuruldu.");
            } catch (err) {
                console.error("PlcHub bağlantı hatası:", err);
            }
        }

        startPlcConnection();
    </script>
}